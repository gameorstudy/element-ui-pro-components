(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["index"]=t():e["index"]=t()})("undefined"!==typeof self?self:this,function(){return function(){"use strict";var e={253:function(e){function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t,r=1;r<arguments.length;r++)for(var o in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)}var r=["attrs","props","domProps"],o=["class","style","directives"],n=["on","nativeOn"],i=function(e){return e.reduce(function(e,i){for(var l in i)if(e[l])if(-1!==r.indexOf(l))e[l]=t({},e[l],i[l]);else if(-1!==o.indexOf(l)){var u=e[l]instanceof Array?e[l]:[e[l]],a=i[l]instanceof Array?i[l]:[i[l]];e[l]=[].concat(u,a)}else if(-1!==n.indexOf(l))for(var m in i[l])if(e[l][m]){var c=e[l][m]instanceof Array?e[l][m]:[e[l][m]],p=i[l][m]instanceof Array?i[l][m]:[i[l][m]];e[l][m]=[].concat(c,p)}else e[l][m]=i[l][m];else if("hook"===l)for(var f in i[l])e[l][f]=e[l][f]?s(e[l][f],i[l][f]):i[l][f];else e[l]=i[l];else e[l]=i[l];return e},{})},s=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=i}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}!function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p=""}();var o={};if(r.r(o),r.d(o,{default:function(){return z}}),"undefined"!==typeof window){var n=window.document.currentScript,i=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(r.p=i[1])}var s,l,u=function(){var e=this,t=e._self._c;return t("el-dialog",e._g(e._b({attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}},scopedSlots:e._u([e.renderTitle?{key:"title",fn:function(){return[t("CustomRender",{attrs:{render:()=>e.renderTitle(e.form)}})]},proxy:!0}:null,e.submitter?{key:"footer",fn:function(){return[e.submitter.customRender?[t("Submitter",{attrs:{submitter:e.submitterProps,action:{submit:e.submit,close:e.close,reset:e.reset,resetAllFields:e.resetAllFields},render:(t,r)=>e.submitter.customRender(e.form,t,r)}})]:[t("span",{staticClass:"dialog-form-footer"},[t("el-button",e._b({on:{click:e.close}},"el-button",e.submitterProps.cancelButtonProps,!1),[e._v(e._s(e.submitterProps.cancelText))]),t("el-button",e._b({attrs:{type:"primary"},on:{click:e.submit}},"el-button",e.submitterProps.submitButtonProps,!1),[e._v(e._s(e.submitterProps.submitText))])],1)]]},proxy:!0}:null],null,!0)},"el-dialog",e.normalizedDialogProps,!1),e.normalizedDialogEvents),[t("el-form",e._b({ref:"dialogFormRef",staticClass:"pro-form",class:e.className,attrs:{model:e.form}},"el-form",e.formProps,!1),[e.grid?[t("el-row",e._b({},"el-row",e.rowProps,!1),e._l(e.normalizedFormItems,function(r){return t("el-col",e._b({key:r.prop??e.getUID()},"el-col",r.colProps,!1),[r.customSlot?e._t(!0===r.customSlot?r.prop:r.customSlot,null,null,{form:e.form}):r.renderFormItem?t("CustomRender",{attrs:{render:()=>r.renderFormItem(e.form)}}):t("ProFormItem",{attrs:{form:e.form,formItem:r},scopedSlots:e._u([{key:r.prop,fn:function(){return[e._t(r.prop,null,null,{form:e.form,formItem:r})]},proxy:!0}],null,!0)})],2)}),1)]:[e._l(e.normalizedFormItems,function(r){return[r.customSlot?e._t(!0===r.customSlot?r.prop:r.customSlot,null,null,{form:e.form}):r.renderFormItem?t("CustomRender",{attrs:{render:()=>r.renderFormItem(e.form)}}):t("ProFormItem",{key:r.prop??e.getUID(),attrs:{form:e.form,formItem:r},scopedSlots:e._u([{key:r.prop,fn:function(){return[e._t(r.prop,null,null,{form:e.form,formItem:r})]},proxy:!0}],null,!0)})]})]],2)],1)},a=[],m={name:"CustomRender",props:{render:{type:Function,required:!0}},render:function(e){return e("Fragment",[this.render()])}},c=m;function p(e,t,r,o,n,i,s,l){var u,a="function"===typeof e?e.options:e;if(t&&(a.render=t,a.staticRenderFns=r,a._compiled=!0),o&&(a.functional=!0),i&&(a._scopeId="data-v-"+i),s?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},a._ssrRegister=u):n&&(u=l?function(){n.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:n),u)if(a.functional){a._injectStyles=u;var m=a.render;a.render=function(e,t){return u.call(t),m(e,t)}}else{var c=a.beforeCreate;a.beforeCreate=c?[].concat(c,u):[u]}return{exports:e,options:a}}var f,d,b=p(c,s,l,!1,null,"2ddfacb0",null),y=b.exports,h=function(){var e=this,t=e._self._c;return t("el-form-item",e._b({scopedSlots:e._u([e.formItem.renderLabel?{key:"label",fn:function(){return[t("CustomRender",{attrs:{render:e.formItem.renderLabel}})]},proxy:!0}:null],null,!0)},"el-form-item",e.normalizedFormItem,!1),[e.formItem.renderField?t("CustomRender",{attrs:{render:()=>e.formItem.renderField({form:e.form,formItem:e.formItem})}}):"slot"===e.formItem.valueType?e._t(e.formItem.prop):t(`el-${e.formItem.valueType}`,e._g(e._b({tag:"component",model:{value:e.form[e.formItem.prop],callback:function(t){e.$set(e.form,e.formItem.prop,t)},expression:"form[formItem.prop]"}},"component",e.formItem.fieldProps,!1),e.formItem.fieldEvents),["select"===e.formItem.valueType?[e.formItem.options?.[0]?.options?e._l(e.formItem.options,function(r){return t("el-option-group",e._b({key:r.label},"el-option-group",r,!1),e._l(r.options,function(r){return t("el-option",e._b({key:r.value},"el-option",r,!1))}),1)}):e._l(e.formItem.options,function(r){return t("el-option",e._b({key:r.value},"el-option",r,!1))})]:e.groups.includes(e.formItem.valueType)?e._l(e.formItem.options,function(r){return t(e.selection[e.formItem.valueType],{key:r.value,tag:"component",attrs:{label:r.value}},[e._v(" "+e._s(r.label)+" ")])}):e._e()],2)],2)},v=[],g={name:"ProFormItem",components:{CustomRender:y},props:{formItem:{type:Object,required:!0},form:{type:Object,required:!0}},computed:{normalizedFormItem(){const{renderLabel:e,valueType:t,renderField:r,fieldProps:o,fieldEvents:n,options:i,valueEnum:s,optionLoader:l,initialValue:u,colProps:a,...m}=this.formItem;return m}},data(){return{groups:["radio-group","checkbox-group"],selection:{"radio-group":"el-radio","checkbox-group":"el-checkbox"}}}},_=g,I=p(_,h,v,!1,null,"19729659",null),F=I.exports,x=r(253),P=r.n(x),O={name:"Submitter",props:{render:{type:Function,required:!0},submitter:{type:Object,required:!0},action:{type:Object,required:!0}},render:function(e){const{submitter:{cancelText:t,submitText:r,cancelButtonProps:o,submitButtonProps:n},action:{close:i,submit:s}}=this,l={props:o,cancelButtonProps:o},u={props:n,submitButtonProps:n},a=[e("el-button",P()([{},l,{on:{click:i},key:"close"}]),[t]),e("el-button",P()([{attrs:{type:"primary"}},u,{on:{click:s},key:"submit"}]),[r])];return e("Fragment",[this.render(this.action,a)])}},S=O,j=p(S,f,d,!1,null,"6996c191",null),k=j.exports;function T(){if("undefined"!==typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}function R(e){switch(e){case"input":case"input-number":return"请输入";case"select":case"time-picker":case"date-picker":case"cascader":return"请选择";default:return""}}function w(e,t){e.placeholder=e.placeholder??R(t)}function C(e,t){const{valueType:r,prop:o,options:n,valueEnum:i,optionLoader:s}=e;"select"===r&&(n?.length>0||(i?i instanceof Map?e.options=Array.from(i,([e,t])=>({label:t,value:e})):e.options=Object.entries(i).map(([e,t])=>({label:t,value:e})):e.options=s&&t[o]?t[o]:[]))}function $(e,t,r){const{valueType:o,prop:n,optionLoader:i}=t;"cascader"===o&&(e.options?.length>0||i&&r[n]&&(e.options=r[n]))}var V={name:"DialogForm",model:{prop:"visible",event:"close"},components:{CustomRender:y,ProFormItem:F,Submitter:k},props:{visible:{type:Boolean,default:!1},title:{type:String},renderTitle:{type:Function},width:{type:String},dialogProps:{type:Object,default:()=>({})},dialogEvents:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},className:{type:String},formItems:{type:Array,required:!0,default:()=>[]},submitter:{type:[Boolean,Object],default:!0},grid:{type:Boolean},rowProps:{type:Object,default:()=>({gutter:8})},initialValues:{type:Object,default:()=>({})}},computed:{normalizedDialogProps(){const{title:e,width:t,dialogProps:r={}}=this,o=r["custom-class"];return{...r,"custom-class":o?`${o} dialog-form`:"dialog-form",visible:void 0,title:e,width:t}},normalizedDialogEvents(){const{dialogEvents:e,close:t}=this,r=e.close;return r?(e.close=()=>{r(),t()},{...e}):{close:t}},normalizedFormItems(){return this.formItems.filter(e=>!e.hideInForm).map(e=>{const{valueType:t,fieldProps:r={}}=e;return w(r,t),C(e,this.cachedOptions),$(r,e,this.cachedOptions),{...e,fieldProps:r}})},submitterProps(){if(this.submitter){const e={cancelText:"取消",submitText:"确定"};return"object"===typeof this.submitter?{...e,...this.submitter}:{...e}}return!1}},data(){return{dialogVisible:!1,cachedOptions:{},form:this.initForm()}},watch:{visible:{handler(e){this.dialogVisible=e},immediate:!0}},created(){this.getOptions()},methods:{getOptions(){for(const e of this.formItems){const{prop:t,optionLoader:r}=e;"function"===typeof r&&r().then(e=>{this.cachedOptions={...this.cachedOptions,[t]:e}})}},initForm(){const{formItems:e,initialValues:t}=this,r=e.reduce((e,t)=>{const{prop:r,initialValue:o}=t;return r?{...e,[r]:o}:e},{});return{...t,...r}},getFormRef(){return this.$refs.dialogFormRef},getForm(){return this.form},setFieldsValue(e){this.form={...this.form,...e}},setFieldValue(e,t){this.form[e]=t},close(){this.$emit("close",!1)},submit(){this.$refs.dialogFormRef?.validate((e,t)=>{e?this.$emit("onFinish",this.form):this.$emit("onError",t)})},async reset(){try{await(this.$refs.dialogFormRef?.resetFields()),this.$emit("onReset")}catch(e){console.error("err",e)}},resetAllFields(){this.$refs.dialogFormRef?.clearValidate(),this.form=this.initForm()},getUID(){return T()}}},E=V,A=p(E,u,a,!1,null,"7c2048c2",null),D=A.exports;D.install=function(e){e.component(D.name,D)};var U=D,z=U;return o}()});
//# sourceMappingURL=index.umd.min.js.map