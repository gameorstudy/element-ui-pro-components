(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["index"]=t():e["index"]=t()})("undefined"!==typeof self?self:this,function(){return function(){"use strict";var e={253:function(e){function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t,r=1;r<arguments.length;r++)for(var o in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)}var r=["attrs","props","domProps"],o=["class","style","directives"],n=["on","nativeOn"],s=function(e){return e.reduce(function(e,s){for(var u in s)if(e[u])if(-1!==r.indexOf(u))e[u]=t({},e[u],s[u]);else if(-1!==o.indexOf(u)){var m=e[u]instanceof Array?e[u]:[e[u]],l=s[u]instanceof Array?s[u]:[s[u]];e[u]=[].concat(m,l)}else if(-1!==n.indexOf(u))for(var p in s[u])if(e[u][p]){var a=e[u][p]instanceof Array?e[u][p]:[e[u][p]],f=s[u][p]instanceof Array?s[u][p]:[s[u][p]];e[u][p]=[].concat(a,f)}else e[u][p]=s[u][p];else if("hook"===u)for(var c in s[u])e[u][c]=e[u][c]?i(e[u][c],s[u][c]):s[u][c];else e[u]=s[u];else e[u]=s[u];return e},{})},i=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=s}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}!function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p=""}();var o={};if(r.r(o),r.d(o,{default:function(){return q}}),"undefined"!==typeof window){var n=window.document.currentScript,s=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(r.p=s[1])}var i,u,m=function(){var e=this,t=e._self._c;return t("el-form",e._b({ref:"proFormRef",staticClass:"pro-form",class:e.className,attrs:{model:e.form}},"el-form",e.formProps,!1),[e.grid?[t("el-row",e._b({},"el-row",e.rowProps,!1),e._l(e.normalizedFormItems,function(r){return t("el-col",e._b({key:r.prop??e.getUID()},"el-col",r.colProps,!1),[r.customSlot?e._t(!0===r.customSlot?r.prop:r.customSlot,null,null,{form:e.form}):r.renderFormItem?t("CustomRender",{attrs:{render:()=>r.renderFormItem(e.form)}}):t("ProFormItem",{attrs:{form:e.form,formItem:r},scopedSlots:e._u([{key:r.prop,fn:function(){return[e._t(r.prop,null,null,{form:e.form,formItem:r})]},proxy:!0}],null,!0)})],2)}),1)]:[e._l(e.normalizedFormItems,function(r){return[r.customSlot?e._t(!0===r.customSlot?r.prop:r.customSlot,null,null,{form:e.form}):r.renderFormItem?t("CustomRender",{attrs:{render:()=>r.renderFormItem(e.form)}}):t("ProFormItem",{key:r.prop??e.getUID(),attrs:{form:e.form,formItem:r},scopedSlots:e._u([{key:r.prop,fn:function(){return[e._t(r.prop,null,null,{form:e.form,formItem:r})]},proxy:!0}],null,!0)})]})],e.submitter?[e.submitter.customRender?[t("Submitter",{attrs:{submitter:e.submitterProps,action:{submit:e.submit,reset:e.reset,resetAllFields:e.resetAllFields},render:(t,r)=>e.submitter.customRender(e.form,t,r)}})]:[t("el-form-item",{staticClass:"pro-table-submitter"},[t("el-button",e._b({on:{click:e.reset}},"el-button",e.submitterProps.resetButtonProps,!1),[e._v(e._s(e.submitterProps.resetText))]),t("el-button",e._b({attrs:{type:"primary"},on:{click:e.submit}},"el-button",e.submitterProps.submitButtonProps,!1),[e._v(e._s(e.submitterProps.submitText))])],1)]]:e._e()],2)},l=[],p={name:"CustomRender",props:{render:{type:Function,required:!0}},render:function(e){return e("Fragment",[this.render()])}},a=p;function f(e,t,r,o,n,s,i,u){var m,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),o&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),i?(m=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},l._ssrRegister=m):n&&(m=u?function(){n.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:n),m)if(l.functional){l._injectStyles=m;var p=l.render;l.render=function(e,t){return m.call(t),p(e,t)}}else{var a=l.beforeCreate;l.beforeCreate=a?[].concat(a,m):[m]}return{exports:e,options:l}}var c,d,b=f(a,i,u,!1,null,"2ddfacb0",null),y=b.exports,h=function(){var e=this,t=e._self._c;return t("el-form-item",e._b({scopedSlots:e._u([e.formItem.renderLabel?{key:"label",fn:function(){return[t("CustomRender",{attrs:{render:e.formItem.renderLabel}})]},proxy:!0}:null],null,!0)},"el-form-item",e.normalizedFormItem,!1),[e.formItem.renderField?t("CustomRender",{attrs:{render:()=>e.formItem.renderField({form:e.form,formItem:e.formItem})}}):"slot"===e.formItem.valueType?e._t(e.formItem.prop):t(`el-${e.formItem.valueType}`,e._g(e._b({tag:"component",model:{value:e.form[e.formItem.prop],callback:function(t){e.$set(e.form,e.formItem.prop,t)},expression:"form[formItem.prop]"}},"component",e.formItem.fieldProps,!1),e.formItem.fieldEvents),["select"===e.formItem.valueType?[e.formItem.options?.[0]?.options?e._l(e.formItem.options,function(r){return t("el-option-group",e._b({key:r.label},"el-option-group",r,!1),e._l(r.options,function(r){return t("el-option",e._b({key:r.value},"el-option",r,!1))}),1)}):e._l(e.formItem.options,function(r){return t("el-option",e._b({key:r.value},"el-option",r,!1))})]:e.groups.includes(e.formItem.valueType)?e._l(e.formItem.options,function(r){return t(e.selection[e.formItem.valueType],{key:r.value,tag:"component",attrs:{label:r.value}},[e._v(" "+e._s(r.label)+" ")])}):e._e()],2)],2)},_=[],v={name:"ProFormItem",components:{CustomRender:y},props:{formItem:{type:Object,required:!0},form:{type:Object,required:!0}},computed:{normalizedFormItem(){const{renderLabel:e,valueType:t,renderField:r,fieldProps:o,fieldEvents:n,options:s,valueEnum:i,optionLoader:u,initialValue:m,colProps:l,...p}=this.formItem;return p}},data(){return{groups:["radio-group","checkbox-group"],selection:{"radio-group":"el-radio","checkbox-group":"el-checkbox"}}}},I=v,F=f(I,h,_,!1,null,"19729659",null),g=F.exports,x=r(253),P=r.n(x),O={name:"Submitter",props:{render:{type:Function,required:!0},submitter:{type:Object,required:!0},action:{type:Object,required:!0}},render:function(e){const{submitter:{resetText:t,submitText:r,resetButtonProps:o,submitButtonProps:n},action:{reset:s,submit:i}}=this,u={props:o,resetButtonProps:o},m={props:n,submitButtonProps:n},l=[e("el-button",P()([{},u,{on:{click:s},key:"reset"}]),[t]),e("el-button",P()([{attrs:{type:"primary"}},m,{on:{click:i},key:"submit"}]),[r])];return e("Fragment",[this.render(this.action,l)])}},S=O,j=f(S,c,d,!1,null,"ee280a3c",null),k=j.exports;function R(){if("undefined"!==typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}function T(e){switch(e){case"input":case"input-number":return"请输入";case"select":case"time-picker":case"date-picker":case"cascader":return"请选择";default:return""}}function C(e,t){e.placeholder=e.placeholder??T(t)}function $(e,t){const{valueType:r,prop:o,options:n,valueEnum:s,optionLoader:i}=e;"select"===r&&(n?.length>0||(s?s instanceof Map?e.options=Array.from(s,([e,t])=>({label:t,value:e})):e.options=Object.entries(s).map(([e,t])=>({label:t,value:e})):e.options=i&&t[o]?t[o]:[]))}function w(e,t,r){const{valueType:o,prop:n,optionLoader:s}=t;"cascader"===o&&(e.options?.length>0||s&&r[n]&&(e.options=r[n]))}var A={name:"ProForm",components:{CustomRender:y,ProFormItem:g,Submitter:k},props:{formProps:{type:Object,default:()=>({})},className:{type:String},formItems:{type:Array,required:!0,default:()=>[]},submitter:{type:[Boolean,Object],default:!0},grid:{type:Boolean},rowProps:{type:Object,default:()=>({gutter:8})},initialValues:{type:Object,default:()=>({})}},computed:{normalizedFormItems(){return this.formItems.filter(e=>!e.hideInForm).map(e=>{const{valueType:t,fieldProps:r={}}=e;return C(r,t),$(e,this.cachedOptions),w(r,e,this.cachedOptions),{...e,fieldProps:r}})},submitterProps(){if(this.submitter){const e={resetText:"重置",submitText:"提交"};return"object"===typeof this.submitter?{...e,...this.submitter}:{...e}}return!1}},data(){return{cachedOptions:{},form:this.initForm()}},created(){this.getOptions()},methods:{getOptions(){for(const e of this.formItems){const{prop:t,optionLoader:r}=e;"function"===typeof r&&r().then(e=>{this.cachedOptions={...this.cachedOptions,[t]:e}})}},initForm(){const{formItems:e,initialValues:t}=this,r=e.reduce((e,t)=>{const{prop:r,initialValue:o}=t;return r?{...e,[r]:o}:e},{});return{...t,...r}},getFormRef(){return this.$refs.proFormRef},getForm(){return this.form},setFieldsValue(e){this.form={...this.form,...e}},setFieldValue(e,t){this.form[e]=t},submit(){this.$refs.proFormRef?.validate((e,t)=>{e?this.$emit("onFinish",this.form):this.$emit("onError",t)})},async reset(){try{await(this.$refs.proFormRef?.resetFields()),this.$emit("onReset")}catch(e){console.error("err",e)}},resetAllFields(){this.$refs.proFormRef?.clearValidate(),this.form=this.initForm()},getUID(){return R()}}},U=A,V=f(U,m,l,!1,null,"225d76ea",null),E=V.exports;E.install=function(e){e.component(E.name,E)};var B=E,q=B;return o}()});
//# sourceMappingURL=index.umd.min.js.map